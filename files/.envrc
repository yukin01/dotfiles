# echo "This is envrc"

# alias
# alias brewdump='brew bundle dump --force'
alias rm='rm -i'
alias mv='mv -i'
alias cp='cp -i'
alias ..='cd ..'

function curlp() {
  while :; do curl -LI $1 -o /dev/null -w '%{http_code}\n' -s; sleep 3; done
}

# ghq & code
function gc() {
  local repo=$(ghq list | fzf)
  #ghq list | fzf | read -l repo
  [[ -n $repo ]] && code $(ghq root)/$repo
}

# ghq & hub browse
function gb() {
  local repo=$(ghq list | fzf | cut -d "/" -f 2,3)
  [[ -n $repo ]] && hub browse $repo
}

# github api (search repos) & hub browse
function gbs() {
  local repo=$(__search_github_repos $1 | fzf)
  [[ -n $repo ]] && hub browse $repo
}

# github api (user repos) & hub browse
function gbu() {
  local repo=$(__list_github_user_repos $1 | fzf)
  [[ -n $repo ]] && hub browse $repo
}

function __search_github_repos() {
  hub api -X GET search/repositories -F q=$1 | jq -r '.items[].full_name'
}

function __list_github_user_repos() {
  hub api users/$1/repos --paginage | jq -r '.[].full_name'
}

# fzf option
export FZF_DEFAULT_OPTS='--height 40% --reverse --border'

# go path
export GOPATH=$HOME/go
export PATH=$PATH:$GOPATH/bin
